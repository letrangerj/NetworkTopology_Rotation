# Figure Caption — Pyoverdine-Mediated Network (Panel 3A)

**Figure 3A: Bipartite network of pyoverdine-mediated iron competition.** The network illustrates the social architecture of siderophore interactions, composed of two distinct node sets: **functional groups (FGs, circles)**, which represent 1,809 bacterial strains collapsed into 177 unique production and utilization repertoires, and **pyoverdine groups (PYOs, diamonds)**, representing 93 distinct siderophore types validated from genetic data. Directed edges signify the flow of public goods: a dark arrow from an FG to a PYO indicates **production**, while a light arrow from a PYO to an FG indicates **utilization**. The network contains 175 production edges and 2,238 utilization edges. The size of each FG node is proportional to the square root of the number of strains it represents, highlighting dominant ecological strategies, while PYO node size reflects its total degree (sum of producers and consumers), indicating its prevalence as a public good. The color of an FG node denotes its ecological strategy based on its production/utilization profile: single-receptor producers (green), multi-receptor producers (blue), non-producers (red), and other specialist types. The spatial layout is determined by a Fruchterman-Reingold force-directed algorithm, which clusters densely interconnected nodes to visually reveal modular structures and identify central hubs of interaction.

---

### Detailed Breakdown & Technical Notes

Description:
This bipartite network visualization displays functional-group (FG) nodes (circles) and pyoverdine (PYO) nodes (hexagon-like markers) connected by directed edges representing production (FG → PYO) and utilization (PYO → FG).

Data and provenance:
- Script: [`scripts/phase_03_network/04_visualize_network.R`](scripts/phase_03_network/04_visualize_network.R:1)
- Inputs: [`data/interim/edges_functional_groups_conservative.csv`](data/interim/edges_functional_groups_conservative.csv:1), [`data/interim/nodes_pyoverdines_conservative.csv`](data/interim/nodes_pyoverdines_conservative.csv:1), [`data/interim/nodes_functional_groups_conservative.csv`](data/interim/nodes_functional_groups_conservative.csv:1)
- Output images: [`figures/network/fg_pyov_network_panel3A.pdf`](figures/network/fg_pyov_network_panel3A.pdf:1), [`figures/network/fg_pyov_network_panel3A.png`](figures/network/fg_pyov_network_panel3A.png:1)
- Run seed: 2025 (layout seed = 42 inside script)

Visual encodings:
- FG nodes: circle shape; fill color encodes strategy class:
  * green = Single-receptor producer
  * orange = Multi-producer
  * blue = Multi-receptor producer
  * purple = Producer-only (no utilization)
  * red = Nonproducer
- PYO nodes: hexagon-like marker (shape 23) with orange fill
- Node size: FG node size ∝ sqrt(strain_count) (visualized using size scale); PYO size ∝ usage/count proxy
- Edges: directed arrow segments; production edges drawn in gray30, utilization in gray50; segments are shortened so arrowheads clear target markers
- Layout: force-directed Fruchterman–Reingold layout computed by igraph::layout_with_fr (niter = 500); coordinates fixed with set.seed to ensure reproducibility

Key numbers (FG-level network):
- Vertices: 270 (177 functional groups + 93 pyoverdines)
- Unique edges: 2,413 (production FG → PYO = 175; utilization PYO → FG = 2,238)
- Components: 2 (giant component + small component) — see [`docs/phase_03/phase_03_summary.md`](docs/phase_03/phase_03_summary.md:1)

How to read the figure:
- Hubs: PYO nodes with many outgoing utilization edges (large hexagons) indicate widely usable siderophores and potential public-good molecules.
- Production hubs: FG nodes with multiple outgoing production edges (larger circles) represent multi-producer functional groups supplying several pyoverdines.
- Strategy differentiation: node color distinguishes ecological strategy classes—identify whether modules are dominated by producers, nonproducers, or mixed strategies.
- Spatial clustering: force-directed proximity and edge density reveal modules and hub–spoke structures; interpret clusters together with modularity and co-assignment diagnostics in Phase 4.

Reproducibility and technical notes:
- The plot is generated by ggplot2; edges are drawn before nodes so nodes overlay edges cleanly; segment shortening is applied to avoid arrowhead overlap.
- Layout and plotting seeds are set in the script for reproducibility: set.seed(2025) and layout seed 42.
- Visualization metrics are saved to [`docs/phase_03/visualization_metrics.csv`](docs/phase_03/visualization_metrics.csv:1) and a textual summary to [`docs/phase_03/visualization_summary.txt`](docs/phase_03/visualization_summary.txt:1).

Biological interpretation and suggested uses:
- Use the panel as a descriptive summary of the conservative FG-level network architecture: identify candidate public-good pyoverdines, multi-producer hubs, and candidate generalist consumers.
- Combine with topology metrics (modularity, nestedness, degree distributions) and co-assignment stability to support claims about module robustness and ecological roles.
- For manuscript figures: include a color legend, a concise caption highlighting the encoding, and an inset or supplementary co-assignment heatmap to document module stability.

Files for cross-reference:
- Implementation and provenance: [`scripts/phase_03_network/04_visualize_network.R`](scripts/phase_03_network/04_visualize_network.R:1)
- Phase 3 summary: [`docs/phase_03/phase_03_summary.md`](docs/phase_03/phase_03_summary.md:1)

End.